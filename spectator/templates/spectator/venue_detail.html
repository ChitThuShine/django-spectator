{% extends 'spectator/base_events.html' %}

{% block head_extra %}
    {% if SPECTATOR_GOOGLE_MAPS_API_KEY %}
        <style type="text/css">
            .venue_map {
                max-width: 100%;
                height: 300px;
                border: 1px solid #eee;
            }
        </style>
    {% endif %}
    {{ block.super }}
{% endblock %}

{% block head_page_title %}{{ venue.name }}{% endblock %}
{% block content_title %}{{ venue.name }}{% endblock %}

{% block breadcrumbs %}
    <li class="breadcrumb-item"><a href="{% url 'spectator:home' %}">Home</a></li>
    <li class="breadcrumb-item"><a href="{% url 'spectator:events_home' %}">Events</a></li>
    <li class="breadcrumb-item"><a href="{% url 'spectator:venue_list' %}">Venues</a></li>
    <li class="breadcrumb-item active">{{ venue.name }}</li>
{% endblock %}

{% block content %}

    <p class="lead">
        {{ venue.address }}, {{ venue.country_name }}
    </p>

    {% if SPECTATOR_GOOGLE_MAPS_API_KEY %}
        <div class="js-venue-map-container"></div>
    {% endif %}

    {% if event_list|length > 0 %}
        <h2>Events</h2>
        {% include 'spectator/includes/events_paginated.html' with event_list=event_list page_obj=page_obj only %}
    {% endif %}

{% endblock content %}


{% block sidebar %}
    {% if perms.spectator.can_edit_venue %}
        <div class="card mb-3">
            <ul class="list-group list-group-flush">
                <li class="list-group-item">
                    <a href="{% url 'admin:spectator_venue_change' venue.id %}">Edit in Admin</a>
                </li>
            </ul>
        </div>
    {% endif %}

    {{ block.super }}
{% endblock %}


{% block foot_extra %}
    {% if SPECTATOR_GOOGLE_MAPS_API_KEY %}
        {% load static %}
        <script>
            var spectator_map_latitude = '{{ venue.latitude }}';
            var spectator_map_longitude = '{{ venue.longitude }}';
        </script>
        <script async defer src="https://maps.googleapis.com/maps/api/js?key={{ SPECTATOR_GOOGLE_MAPS_API_KEY }}&callback=spectatorInitMap"></script>
        <script src="{% static "js/venue_map.js" %}"></script>
    {% endif %}

    {{ block.super }}
{% endblock %}

