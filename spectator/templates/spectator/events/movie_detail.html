{% extends 'spectator/events/base.html' %}

{% block head_page_title %}{{ movie.title }} {% if movie.year %}({{ movie.year }}){% endif %}{% endblock %}
{% block content_title %}
    {{ movie.title }}
    {% if movie.year %}
        <small class="text-muted">({{ movie.year }})</small>
    {% endif %}
{% endblock %}

{% block breadcrumbs %}
    <li class="breadcrumb-item"><a href="{% url 'spectator:home' %}">Home</a></li>
    <li class="breadcrumb-item"><a href="{% url 'spectator:events_home' %}">Events</a></li>
    <li class="breadcrumb-item"><a href="{% url 'spectator:movie_list' %}">Movies</a></li>
    <li class="breadcrumb-item active">{{ movie.title }}</li>
{% endblock %}

{% block content %}

    {% if movie.imdb_id %}
        <p><a href="http://www.imdb.com/title/{{ movie.imdb_id }}">View at IMDb</a></p>
    {% endif %}

    {% with movie.roles.all as roles %}
        {% if roles|length > 0 %}
            <h2>Cast and crew</h2>
            {% include 'spectator/core/includes/roles_list.html' with roles=roles only %}
        {% endif %}
    {% endwith %}

    {% include 'spectator/events/includes/visits_list.html' with events=movie.movieevent_set.all heading_level='h2' only %}

{% endblock content %}


{% block sidebar %}
    {% if perms.spectator.can_edit_movie %}
        <div class="card mb-3">
            <ul class="list-group list-group-flush">
                <li class="list-group-item">
                    <a href="{% url 'admin:spectator_movie_change' movie.id %}">Edit in Admin</a>
                </li>
            </ul>
        </div>
    {% endif %}

    {{ block.super }}
{% endblock %}
